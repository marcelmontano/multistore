<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SolarCuba | Energ√≠a Profesional y Certificada</title>
    <meta name="description" content="Kits solares en Cuba. 120V y 220V. Garant√≠a de 1 a√±o y Certificado de Instalaci√≥n. Bater√≠as de Litio de alta capacidad.">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.net.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { solar: { gold: '#FFD700', orange: '#FFA500', dark: '#0f172a' } },
                    fontFamily: { sans: ['Montserrat', 'sans-serif'], tech: ['Orbitron', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0f172a; color: #e2e8f0; }
        .glass-panel {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }
        .glass-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 215, 0, 0.1);
            transition: all 0.3s ease;
        }
        .glass-card:hover {
            border-color: #FFD700;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px -10px rgba(255, 215, 0, 0.3);
        }
        .whatsapp-float {
            position: fixed; bottom: 30px; right: 30px; z-index: 1000;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        body.modal-active { overflow: hidden; }
        .voltage-alert { animation: flashRed 1.5s infinite; }
        @keyframes flashRed { 0%, 100% { background-color: rgba(220, 38, 38, 0.2); } 50% { background-color: rgba(220, 38, 38, 0.5); } }
        input[type=number]::-webkit-inner-spin-button { opacity: 1; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
    </style>
</head>
<body class="antialiased selection:bg-yellow-500 selection:text-black">

    <!-- WhatsApp Float -->
    <a href="https://wa.me/5358183649" target="_blank" class="whatsapp-float group">
        <div class="relative">
            <div class="absolute -top-10 right-0 bg-white text-black text-xs font-bold px-3 py-1 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity w-48 text-center shadow-lg">
                ¬°Respuesta Inmediata!
            </div>
            <div class="w-16 h-16 bg-[#25D366] rounded-full flex items-center justify-center text-white text-3xl shadow-2xl hover:bg-[#20ba5a] transition">
                <i class="fab fa-whatsapp"></i>
            </div>
        </div>
    </a>

    <!-- Navbar -->
    <nav class="fixed w-full z-50 glass-panel border-b-0 top-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-solar-panel text-3xl text-yellow-400"></i>
                    <span class="text-xl md:text-2xl font-tech font-bold tracking-wider text-white">SOLAR<span class="text-yellow-400">CUBA</span></span>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="#garantia" class="text-yellow-400 font-bold uppercase text-xs tracking-widest hover:text-white transition flex items-center border border-yellow-400/30 px-3 py-1 rounded"><i class="fas fa-certificate mr-2"></i> Garant√≠a</a>
                    <a href="#kits" class="text-gray-300 hover:text-yellow-400 transition font-medium uppercase text-xs tracking-widest py-2">Kits</a>
                    <a href="#simulador" class="text-gray-300 hover:text-yellow-400 transition font-medium uppercase text-xs tracking-widest py-2">Calculadora</a>
                    <a href="#pagos" class="text-gray-300 hover:text-yellow-400 transition font-medium uppercase text-xs tracking-widest py-2">Pagos</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section class="relative min-h-[85vh] flex items-center justify-center pt-20">
        <div id="vanta-bg" class="absolute inset-0 z-0 opacity-50"></div>
        <div class="absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/90 to-transparent z-10"></div>
        
        <div class="relative z-20 max-w-7xl mx-auto px-4 text-center">
            <div class="inline-block mb-6 px-6 py-2 rounded-full border border-green-500/50 bg-green-500/10 backdrop-blur-md animate-pulse">
                <span class="text-green-400 text-sm font-bold tracking-wider uppercase"><i class="fas fa-check-circle mr-2"></i>Certificado de Instalaci√≥n + 1 A√±o de Garant√≠a</span>
            </div>
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold mb-6 text-white leading-tight">
                Adi√≥s a los Apagones <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 font-tech">PARA SIEMPRE</span>
            </h1>
            <p class="text-lg md:text-xl text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed">
                Soluciones energ√©ticas profesionales para hogares y negocios en Cuba. 
                Bater√≠as de Litio de alta densidad, materiales 100% cobre y soporte t√©cnico especializado.
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#kits" class="px-8 py-4 bg-yellow-500 text-black font-bold rounded-xl hover:bg-yellow-400 transition shadow-[0_0_20px_rgba(255,215,0,0.4)] flex items-center justify-center transform hover:scale-105 duration-200">
                    Ver Cat√°logo de Kits
                </a>
                <a href="#simulador" class="px-8 py-4 glass-panel text-white font-bold rounded-xl hover:bg-white/10 transition flex items-center justify-center border border-white/20">
                    <i class="fas fa-calculator mr-2"></i> Simular Consumo
                </a>
            </div>
        </div>
    </section>

    <!-- Warranty Section -->
    <section id="garantia" class="py-16 bg-gradient-to-b from-[#0f172a] to-[#1e293b] relative border-y border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8 text-center">
                <div class="p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-yellow-500/50 transition group">
                    <div class="w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-yellow-500 transition">
                        <i class="fas fa-shield-alt text-3xl text-yellow-500 group-hover:text-black"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">1 A√±o de Garant√≠a Total</h3>
                    <p class="text-gray-400 text-sm">Cubrimos inversor, bater√≠as y paneles. Tu inversi√≥n est√° segura con respaldo t√©cnico real en Cuba.</p>
                </div>

                <div class="p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-green-500/50 transition group">
                    <div class="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-green-500 transition">
                        <i class="fas fa-file-contract text-3xl text-green-500 group-hover:text-black"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">Certificado T√©cnico</h3>
                    <p class="text-gray-400 text-sm">Entregamos certificado de instalaci√≥n que valida las condiciones t√©cnicas y seguridad del inmueble.</p>
                </div>

                <div class="p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-blue-500/50 transition group">
                    <div class="w-16 h-16 bg-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-500 transition">
                        <i class="fas fa-tools text-3xl text-blue-500 group-hover:text-black"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">Materiales Premium</h3>
                    <p class="text-gray-400 text-sm">Instalamos con cable el√©ctrico 100% cobre, mangueras corrugadas y canaletas est√©ticas.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Kits Section -->
    <section id="kits" class="py-20 relative bg-[#0f172a]">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-white mb-4">Kits Solares Premium</h2>
                <p class="text-gray-400 max-w-2xl mx-auto">Equipos dimensionados para la realidad cubana. Todos incluyen instalaci√≥n y transporte en La Habana.</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                
                <!-- Kit 5kW -->
                <div class="glass-card rounded-2xl overflow-hidden flex flex-col relative group border border-gray-700">
                    <div class="absolute top-0 right-0 bg-red-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">120V SOLAMENTE</div>
                    <div class="bg-gray-800/80 p-6 border-b border-gray-700">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-2xl font-bold text-white">Kit 5kW Residencial</h3>
                            <div class="text-right">
                                <div class="text-yellow-400 font-bold text-2xl">$4,685</div>
                                <div class="text-xs text-gray-400">+ $500 Instalaci√≥n</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-300">Para luces, refrigerador, TV y ventiladores. <span class="text-red-400 font-bold">NO apto para 220V.</span></p>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <ul class="space-y-3 text-sm text-gray-300 mb-6">
                            <li class="flex items-center"><i class="fas fa-bolt text-yellow-500 w-8"></i> Inversor SRNE 5kW (120V AC)</li>
                            <li class="flex items-center"><i class="fas fa-battery-full text-blue-400 w-8"></i> Bat. 10.49 kWh (205Ah)</li>
                            <li class="flex items-center"><i class="fas fa-solar-panel text-green-400 w-8"></i> 6 Paneles 620Wp (3720Wp)</li>
                        </ul>
                        <div class="mt-auto grid grid-cols-2 gap-3">
                            <button onclick="openModal('5kw')" class="py-3 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition text-sm font-medium">
                                <i class="fas fa-info-circle mr-2"></i> Detalles
                            </button>
                            <a href="https://wa.me/5358183649?text=Hola,%20me%20interesa%20el%20Kit%205kW%20(120V)." target="_blank" class="py-3 bg-[#25D366] hover:bg-[#20ba5a] text-white rounded-lg text-center transition text-sm font-bold flex items-center justify-center shadow-lg">
                                <i class="fab fa-whatsapp mr-2"></i> Comprar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kit 6.5kW -->
                <div class="glass-card rounded-2xl overflow-hidden flex flex-col relative group border-t-4 border-yellow-500">
                    <div class="absolute top-0 right-0 bg-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-bl-lg">RECOMENDADO</div>
                    <div class="bg-gray-800/80 p-6 border-b border-gray-700">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-2xl font-bold text-white">Kit 6.5kW Split-Phase</h3>
                            <div class="text-right">
                                <div class="text-yellow-400 font-bold text-2xl">$6,985</div>
                                <div class="text-xs text-gray-400">+ $750 Instalaci√≥n</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-300">Soporta equipos 110V y 220V (Splits). Ideal familia media.</p>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <ul class="space-y-3 text-sm text-gray-300 mb-6">
                            <li class="flex items-center"><i class="fas fa-bolt text-yellow-500 w-8"></i> Inversor SRNE 6.5kW (120/240V)</li>
                            <li class="flex items-center"><i class="fas fa-battery-full text-blue-400 w-8"></i> Bat. 14.33 kWh (280Ah)</li>
                            <li class="flex items-center"><i class="fas fa-solar-panel text-green-400 w-8"></i> 12 Paneles 620Wp (7440Wp)</li>
                        </ul>
                        <div class="mt-auto grid grid-cols-2 gap-3">
                            <button onclick="openModal('6.5kw')" class="py-3 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition text-sm font-medium">
                                <i class="fas fa-info-circle mr-2"></i> Detalles
                            </button>
                            <a href="https://wa.me/5358183649?text=Hola,%20me%20interesa%20el%20Kit%206.5kW%20(220V)." target="_blank" class="py-3 bg-[#25D366] hover:bg-[#20ba5a] text-white rounded-lg text-center transition text-sm font-bold flex items-center justify-center shadow-lg">
                                <i class="fab fa-whatsapp mr-2"></i> Comprar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kit 10kW -->
                <div class="glass-card rounded-2xl overflow-hidden flex flex-col relative group">
                    <div class="absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">ALTA POTENCIA</div>
                    <div class="bg-gray-800/80 p-6 border-b border-gray-700">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-2xl font-bold text-white">Kit 10kW Pro</h3>
                            <div class="text-right">
                                <div class="text-yellow-400 font-bold text-2xl">$8,605</div>
                                <div class="text-xs text-gray-400">+ $950 Instalaci√≥n</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-300">Para casas grandes o negocios. M√∫ltiples aires acondicionados.</p>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <ul class="space-y-3 text-sm text-gray-300 mb-6">
                            <li class="flex items-center"><i class="fas fa-bolt text-yellow-500 w-8"></i> Inversor SRNE 10kW (120/240V)</li>
                            <li class="flex items-center"><i class="fas fa-battery-full text-blue-400 w-8"></i> Bat. 14.33 kWh (280Ah)</li>
                            <li class="flex items-center"><i class="fas fa-solar-panel text-green-400 w-8"></i> 16 Paneles 620Wp (9920Wp)</li>
                        </ul>
                        <div class="mt-auto grid grid-cols-2 gap-3">
                            <button onclick="openModal('10kwA')" class="py-3 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition text-sm font-medium">
                                <i class="fas fa-info-circle mr-2"></i> Detalles
                            </button>
                            <a href="https://wa.me/5358183649?text=Hola,%20me%20interesa%20el%20Kit%2010kW%20Pro." target="_blank" class="py-3 bg-[#25D366] hover:bg-[#20ba5a] text-white rounded-lg text-center transition text-sm font-bold flex items-center justify-center shadow-lg">
                                <i class="fab fa-whatsapp mr-2"></i> Comprar
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Kit 10kW Plus -->
                <div class="glass-card rounded-2xl overflow-hidden flex flex-col relative group border border-yellow-500 shadow-[0_0_15px_rgba(255,215,0,0.15)]">
                    <div class="bg-gradient-to-r from-yellow-600 to-orange-600 p-3 flex justify-between items-center">
                        <span class="text-black font-bold text-sm"><i class="fas fa-crown mr-2"></i> VERSI√ìN PLUS</span>
                        <span class="bg-black/30 text-white text-xs px-2 py-1 rounded">MAX BATER√çA</span>
                    </div>
                    <div class="bg-gray-800/80 p-6 border-b border-gray-700">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-2xl font-bold text-white">Kit 10kW PLUS</h3>
                            <div class="text-right">
                                <div class="text-white font-bold text-2xl">$9,930</div>
                                <div class="text-xs text-gray-400">+ $950 Instalaci√≥n</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-400">Autonom√≠a extendida para negocios 24/7.</p>
                    </div>
                    <div class="p-6 flex-1 flex flex-col">
                        <ul class="space-y-3 text-sm text-gray-300 mb-6">
                            <li class="flex items-center"><i class="fas fa-bolt text-yellow-500 w-8"></i> Inversor 10kW (120/240V)</li>
                            <li class="flex items-center"><i class="fas fa-battery-full text-yellow-500 w-8"></i> <strong>20.48 kWh</strong> (4x Bat)</li>
                            <li class="flex items-center"><i class="fas fa-solar-panel text-green-400 w-8"></i> 16 Paneles 620Wp</li>
                        </ul>
                        <div class="mt-auto grid grid-cols-2 gap-3">
                            <button onclick="openModal('10kwB')" class="py-3 border border-gray-500 text-gray-300 rounded-lg hover:bg-gray-700 hover:text-white transition text-sm font-medium">
                                <i class="fas fa-info-circle mr-2"></i> Detalles
                            </button>
                            <a href="https://wa.me/5358183649?text=Hola,%20quiero%20el%20Kit%2010kW%20PLUS%20con%20maxima%20bater√≠a." target="_blank" class="py-3 bg-[#25D366] hover:bg-[#20ba5a] text-white rounded-lg text-center transition text-sm font-bold flex items-center justify-center shadow-lg">
                                <i class="fab fa-whatsapp mr-2"></i> Comprar
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section id="simulador" class="py-20 bg-[#0b1120] relative border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-bold text-white mb-4">Simulador de Autonom√≠a</h2>
                <p class="text-gray-400">Calcula si la bater√≠a soporta tus equipos y las horas que necesitas.</p>
            </div>

            <div class="grid lg:grid-cols-12 gap-6">
                <!-- Left: Appliances List -->
                <div class="lg:col-span-6 glass-panel rounded-2xl p-6">
                    <h3 class="text-lg font-bold text-white mb-4 border-b border-gray-700 pb-2 flex justify-between">
                        <span><i class="fas fa-plug text-yellow-500 mr-2"></i> Equipos y Horas de Uso</span>
                    </h3>
                    <div class="space-y-2 overflow-y-auto max-h-[500px] pr-2" id="applianceList">
                        <!-- JS Generated -->
                    </div>
                </div>

                <!-- Right: Settings & Results -->
                <div class="lg:col-span-6 flex flex-col gap-4">
                    
                    <!-- Config -->
                    <div class="glass-panel rounded-2xl p-6">
                        <h3 class="text-lg font-bold text-white mb-4 border-b border-gray-700 pb-2"><i class="fas fa-cogs text-blue-400 mr-2"></i> Selecciona Kit y Escenario</h3>
                        
                        <select id="kitSelect" class="w-full bg-gray-800 border border-gray-600 text-white rounded-lg p-3 mb-4 focus:border-yellow-500 outline-none text-sm">
                            <option value="5kw">Kit 5kW (120V) - Bat 10.49 kWh</option>
                            <option value="6.5kw">Kit 6.5kW (120/240V) - Bat 14.33 kWh</option>
                            <option value="10kwA">Kit 10kW Pro (120/240V) - Bat 14.33 kWh</option>
                            <option value="10kwB">Kit 10kW Plus (120/240V) - Bat 20.48 kWh</option>
                        </select>

                        <div class="flex items-center justify-between mt-2">
                            <div class="flex items-center">
                                <input type="checkbox" id="nightMode" class="w-5 h-5 accent-yellow-500 mr-2">
                                <span class="text-sm text-gray-300">Simular Noche / Apag√≥n</span>
                            </div>
                            <div class="text-xs text-gray-500" id="voltageDisplay">120V Only</div>
                        </div>
                    </div>

                    <!-- Results -->
                    <div class="glass-panel rounded-2xl p-6 border-t-4 border-yellow-500 flex-1 flex flex-col justify-between">
                        
                        <!-- Error Box -->
                        <div id="voltageWarning" class="hidden p-3 mb-4 rounded bg-red-900/80 border border-red-500 text-white text-xs font-bold text-center voltage-alert">
                            <i class="fas fa-exclamation-triangle text-xl block mb-1"></i>
                            ¬°ERROR DE VOLTAJE! Kit 5kW no soporta equipos 220V.
                        </div>

                        <div>
                            <!-- Instant Power -->
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">Potencia Instant√°nea</span>
                                    <span class="font-mono text-white font-bold" id="currentLoadW">0 W</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-3 overflow-hidden">
                                    <div id="loadBar" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
                                </div>
                                <div id="inverterMsg" class="text-xs text-red-400 mt-1 h-4"></div>
                            </div>

                            <!-- Continuous Autonomy (Restored Feature) -->
                            <div class="bg-gray-800/50 p-3 rounded border border-gray-700 mb-4 text-center">
                                <div class="text-[10px] text-gray-400 uppercase">Si dejas todo encendido sin parar:</div>
                                <div class="text-2xl font-bold text-white" id="continuousHours">-- h</div>
                                <div class="text-[10px] text-yellow-500 italic">*Estimado continuo</div>
                            </div>

                            <!-- Battery Energy Analysis -->
                            <div class="mb-2">
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="text-gray-400">Energ√≠a Requerida (Perfil Horas)</span>
                                    <span class="font-mono text-yellow-400 font-bold" id="energyNeededDisplay">0 kWh</span>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-5 overflow-hidden relative border border-gray-600">
                                    <div id="batteryBar" class="h-full bg-green-500 transition-all duration-500" style="width: 0%"></div>
                                    <div class="absolute inset-0 flex items-center justify-center text-[10px] font-bold text-white shadow-black drop-shadow-md" id="batteryBarText">0%</div>
                                </div>
                            </div>

                            <!-- Verdict -->
                            <div id="verdictBox" class="bg-gray-800 p-3 rounded border border-gray-700 text-center mt-3">
                                <div class="font-bold text-white" id="verdictTitle">--</div>
                                <div class="text-xs text-gray-400" id="verdictSub">Define equipos y horas</div>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-700 text-center">
                             <p class="text-[10px] text-gray-500 mb-2 italic">Los c√°lculos son estimados y dependen de variables reales de consumo.</p>
                            <a href="https://wa.me/5358183649" class="block w-full py-3 bg-[#25D366] hover:bg-[#20ba5a] text-white font-bold rounded-lg transition shadow-lg">
                                <i class="fab fa-whatsapp mr-2"></i> Consultar con Experto
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Payment & Shipping -->
    <section id="pagos" class="py-16 bg-black/50 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-bold text-white mb-4 border-b border-yellow-500 inline-block">M√©todos de Pago</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>USD/EUR (Efectivo)</span> <i class="fas fa-check text-green-500"></i></li>
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>Zelle</span> <i class="fas fa-check text-green-500"></i></li>
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>Paypal</span> <i class="fas fa-check text-green-500"></i></li>
                        <li class="flex justify-between bg-gray-800 p-3 rounded border-l-2 border-yellow-500">
                            <span>CUP (+10 Tasa)</span>
                            <span class="text-xs bg-black px-2 py-1 rounded">Max 400 USD</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white mb-4 border-b border-blue-500 inline-block">Instalaci√≥n</h3>
                    <ul class="space-y-2 text-sm text-gray-300">
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>Kit 5kW</span> <span class="text-white font-bold">500 USD</span></li>
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>Kit 6.5kW</span> <span class="text-white font-bold">750 USD</span></li>
                        <li class="flex justify-between bg-gray-800 p-3 rounded"><span>Kit 10kW</span> <span class="text-white font-bold">950 USD</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-bold text-white mb-4 border-b border-green-500 inline-block">Env√≠os</h3>
                    <div class="bg-green-900/20 p-4 rounded border border-green-500/30 mb-3">
                        <div class="font-bold text-white">üìç La Habana: GRATIS</div>
                        <p class="text-xs text-gray-400">Transporte incluido hasta la puerta.</p>
                    </div>
                    <div class="bg-gray-800 p-4 rounded">
                        <div class="font-bold text-white">üöõ Provincias</div>
                        <p class="text-xs text-gray-400">Costo adicional seg√∫n destino. Consultar.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-8 text-center border-t border-gray-900 mt-10">
        <div class="max-w-7xl mx-auto px-4">
            <p class="text-gray-500 text-sm">¬© 2024 SolarCuba. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- MODAL POPUP -->
    <div id="modalOverlay" class="fixed inset-0 bg-black/90 z-[70] hidden flex items-center justify-center p-4 backdrop-blur-sm" onclick="closeModal()">
        <div id="modalContent" class="bg-[#1e293b] w-full max-w-2xl rounded-xl border border-yellow-500/20 shadow-2xl max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
            <div class="sticky top-0 bg-[#1e293b] p-4 border-b border-gray-700 flex justify-between items-center z-10">
                <h3 id="modalTitle" class="text-xl font-bold text-white font-tech">Detalles</h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div id="modalBody" class="p-6 space-y-4 text-sm text-gray-300"></div>
        </div>
    </div>

    <script>
        // Background Animation
        if (typeof VANTA !== 'undefined') {
            VANTA.NET({ el: "#vanta-bg", mouseControls: true, touchControls: true, gyroControls: false, minHeight: 200.00, minWidth: 200.00, scale: 1.00, scaleMobile: 1.00, color: 0xffa500, backgroundColor: 0x0f172a, points: 8.00, maxDistance: 20.00, spacing: 18.00 })
        }

        // --- DATA ---
        const appliances = [
            { id: 'tv', name: 'TV + Cajita', w: 100, v: 110, icon: 'fa-tv', defH: 4 },
            { id: 'lights', name: 'Luces LED (x5)', w: 50, v: 110, icon: 'fa-lightbulb', defH: 6 },
            { id: 'fan', name: 'Ventilador', w: 60, v: 110, icon: 'fa-fan', defH: 8 },
            { id: 'refri', name: 'Refrigerador', w: 200, v: 110, icon: 'fa-snowflake', defH: 24 },
            { id: 'freezer', name: 'Freezer', w: 150, v: 110, icon: 'fa-cube', defH: 24 },
            { id: 'rice', name: 'Olla Reina', w: 800, v: 110, icon: 'fa-bowl-rice', defH: 1 },
            { id: 'pc', name: 'Laptop/Router', w: 80, v: 110, icon: 'fa-laptop', defH: 8 },
            // 220V Items
            { id: 'split', name: 'Split Inverter 1T', w: 900, v: 220, icon: 'fa-wind', color: 'text-yellow-500', defH: 8 },
            { id: 'pump', name: 'Bomba Agua', w: 750, v: 220, icon: 'fa-water', color: 'text-blue-400', defH: 0.5 }
        ];

        const kits = {
            '5kw': { inverter: 5000, battKwh: 10.49, voltage: 110, priceKit: 4685, priceInstall: 500 },
            '6.5kw': { inverter: 6500, battKwh: 14.336, voltage: 220, priceKit: 6985, priceInstall: 750 },
            '10kwA': { inverter: 10000, battKwh: 14.336, voltage: 220, priceKit: 8605, priceInstall: 950 },
            '10kwB': { inverter: 10000, battKwh: 20.48, voltage: 220, priceKit: 9930, priceInstall: 950 }
        };

        const kitDetails = {
            '5kw': { t: 'Kit 5kW Residencial (120V)', b: `
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="text-yellow-500 font-bold mb-1">Generaci√≥n</h4>
                        <ul class="list-disc pl-4 text-xs"><li>6 Paneles 620Wp (3720Wp)</li><li>Marca TW Solar / Leader</li><li>Soportes Aluminio 15¬∞</li></ul>
                    </div>
                    <div>
                        <h4 class="text-blue-400 font-bold mb-1">Almacenamiento</h4>
                        <ul class="list-disc pl-4 text-xs"><li>Inversor SRNE 5kW (120V AC)</li><li>Bat LiFePO4 10.49 kWh (SE10B)</li></ul>
                    </div>
                </div>
                <div class="mt-3 bg-red-900/30 p-2 rounded text-center text-red-300 text-xs font-bold">IMPORTANTE: Salida 120V. No soporta equipos 220V.</div>` 
            },
            '6.5kw': { t: 'Kit 6.5kW (120/240V)', b: `
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="text-yellow-500 font-bold mb-1">Generaci√≥n</h4>
                        <ul class="list-disc pl-4 text-xs"><li>12 Paneles 620Wp (7440Wp)</li><li>Marca DHN-66Z16/DG</li></ul>
                    </div>
                    <div>
                        <h4 class="text-blue-400 font-bold mb-1">Almacenamiento</h4>
                        <ul class="list-disc pl-4 text-xs"><li>Inversor SRNE 6.5kW (Split Phase)</li><li>Bat LiFePO4 14.33 kWh (SE15B)</li></ul>
                    </div>
                </div>` 
            },
            '10kwA': { t: 'Kit 10kW Pro (120/240V)', b: `
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="text-yellow-500 font-bold mb-1">Generaci√≥n</h4>
                        <ul class="list-disc pl-4 text-xs"><li>16 Paneles 620Wp (9920Wp)</li></ul>
                    </div>
                    <div>
                        <h4 class="text-blue-400 font-bold mb-1">Almacenamiento</h4>
                        <ul class="list-disc pl-4 text-xs"><li>Inversor SRNE 10kW Industrial</li><li>Bat LiFePO4 14.33 kWh (SE15B)</li></ul>
                    </div>
                </div>` 
            },
            '10kwB': { t: 'Kit 10kW PLUS (Max Bater√≠a)', b: `
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h4 class="text-yellow-500 font-bold mb-1">Generaci√≥n</h4>
                        <ul class="list-disc pl-4 text-xs"><li>16 Paneles 620Wp (9920Wp)</li></ul>
                    </div>
                    <div>
                        <h4 class="text-blue-400 font-bold mb-1">Almacenamiento Masivo</h4>
                        <ul class="list-disc pl-4 text-xs"><li>Inversor SRNE 10kW</li><li><strong>4x Bat LiFePO4</strong> (20.48 kWh Total)</li></ul>
                    </div>
                </div>` 
            }
        };

        // --- CALCULATOR STATE ---
        let appState = {}; 

        function init() {
            const list = document.getElementById('applianceList');
            appliances.forEach(app => {
                appState[app.id] = { qty: 0, hours: app.defH };
                const vLabel = app.v === 220 ? '<span class="bg-yellow-600 text-black text-[10px] px-1 rounded font-bold ml-1">220V</span>' : '';
                const extraClass = app.v === 220 ? 'border-l-4 border-l-yellow-500' : '';
                
                const div = document.createElement('div');
                div.className = `bg-gray-800/50 p-3 rounded border border-gray-700 hover:border-gray-500 transition mb-2 ${extraClass}`;
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <div class="flex items-center gap-3">
                            <div class="text-yellow-500 w-6 text-center"><i class="fas ${app.icon}"></i></div>
                            <div>
                                <div class="text-sm font-bold text-white flex items-center">${app.name} ${vLabel}</div>
                                <div class="text-[10px] text-gray-500">${app.w}W</div>
                            </div>
                        </div>
                        <div class="flex items-center bg-gray-900 rounded p-1">
                            <button onclick="updateState('${app.id}', 'qty', -1)" class="w-8 h-8 text-gray-400 hover:text-white flex items-center justify-center">-</button>
                            <span id="qty-${app.id}" class="w-6 text-center text-sm font-mono text-white">0</span>
                            <button onclick="updateState('${app.id}', 'qty', 1)" class="w-8 h-8 text-yellow-500 hover:text-yellow-400 font-bold flex items-center justify-center">+</button>
                        </div>
                    </div>
                    <div class="flex items-center justify-end gap-2 opacity-50 transition-opacity" id="hours-row-${app.id}">
                        <label class="text-[10px] text-gray-400 uppercase">Horas Uso:</label>
                        <input type="number" value="${app.defH}" min="0" max="24" step="0.5"
                            class="w-16 bg-gray-900 border border-gray-600 text-white text-center rounded text-sm p-1 focus:border-yellow-500 outline-none"
                            onchange="updateState('${app.id}', 'hours', this.value)">
                    </div>
                `;
                list.appendChild(div);
            });

            document.getElementById('kitSelect').addEventListener('change', calc);
            document.getElementById('nightMode').addEventListener('change', calc);
            calc();
        }

        function updateState(id, type, val) {
            if (type === 'qty') {
                let curr = appState[id].qty + val;
                if (curr < 0) curr = 0;
                appState[id].qty = curr;
                document.getElementById(`qty-${id}`).innerText = curr;
                
                const row = document.getElementById(`hours-row-${id}`);
                if (curr > 0) row.classList.remove('opacity-50');
                else row.classList.add('opacity-50');
            } else {
                let h = parseFloat(val);
                if (h < 0) h = 0; if (h > 24) h = 24;
                appState[id].hours = h;
            }
            calc();
        }

        function calc() {
            const kitId = document.getElementById('kitSelect').value;
            const kit = kits[kitId];
            const isNight = document.getElementById('nightMode').checked;

            document.getElementById('voltageDisplay').innerText = kit.voltage === 110 ? '120V Only' : '120V / 240V';

            let instantWatts = 0;
            let totalWh = 0;
            let has220V = false;
            let activeCount = 0;

            appliances.forEach(app => {
                const s = appState[app.id];
                if (s.qty > 0) {
                    activeCount++;
                    instantWatts += app.w * s.qty;
                    if (app.v === 220) has220V = true;
                    
                    // Duty Cycle factor for Energy Calculation
                    let duty = 1.0;
                    if (app.id === 'refri' || app.id === 'freezer') duty = 0.5; 
                    if (app.id === 'split') duty = 0.7;
                    
                    totalWh += (app.w * s.qty * s.hours * duty);
                }
            });

            // UI: Voltage Check
            const vWarn = document.getElementById('voltageWarning');
            if (kit.voltage === 110 && has220V) {
                vWarn.classList.remove('hidden');
                document.getElementById('verdictTitle').innerHTML = "<span class='text-red-500'>Incompatible</span>";
                document.getElementById('verdictSub').innerText = "Kit 5kW no soporta 220V";
                return;
            } else {
                vWarn.classList.add('hidden');
            }

            // UI: Instant Power Bar
            document.getElementById('currentLoadW').innerText = `${instantWatts} W`;
            const loadPerc = Math.min((instantWatts / kit.inverter) * 100, 100);
            const loadBar = document.getElementById('loadBar');
            loadBar.style.width = `${loadPerc}%`;
            
            if (instantWatts > kit.inverter) {
                loadBar.className = "h-full bg-red-600";
                document.getElementById('inverterMsg').innerText = "‚ö†Ô∏è Sobrecarga del Inversor";
                return;
            } else {
                loadBar.className = "h-full bg-blue-500 transition-all duration-500";
                document.getElementById('inverterMsg').innerText = "";
            }

            // UI: Continuous Autonomy (Duration)
            const usableWh = kit.battKwh * 1000 * 0.90;
            let continuousH = 0;
            if (instantWatts > 0) {
                // Duty cycle average assumption for continuous run
                let avgDuty = 1.0;
                if (activeCount > 0 && (appState['refri'].qty > 0 || appState['split'].qty > 0)) avgDuty = 0.8;
                continuousH = (usableWh / instantWatts) * avgDuty;
            }
            document.getElementById('continuousHours').innerText = (activeCount === 0) ? "-- h" : (continuousH > 48 ? "48h+" : `${continuousH.toFixed(1)} h`);

            // UI: Energy/Battery Bar (Profile Based)
            if (activeCount === 0) {
                document.getElementById('batteryBar').style.width = "0%";
                document.getElementById('batteryBarText').innerText = "0%";
                document.getElementById('energyNeededDisplay').innerText = "0 kWh";
                document.getElementById('verdictTitle').innerText = "--";
                document.getElementById('verdictSub').innerText = "Define equipos";
                return;
            }

            let finalWhNeeded = totalWh;
            // Solar Contribution logic (simplified)
            if (!isNight) {
                let panelW = (kitId === '5kw') ? 3720 : (kitId === '6.5kw' ? 7440 : 9920);
                let solarGenWh = panelW * 5 * 0.7; // 5 peak hours * efficiency
                finalWhNeeded = Math.max(0, totalWh - solarGenWh);
            }

            document.getElementById('energyNeededDisplay').innerText = `${(finalWhNeeded/1000).toFixed(2)} kWh`;
            
            const batPerc = (finalWhNeeded / usableWh) * 100;
            const batBar = document.getElementById('batteryBar');
            batBar.style.width = `${Math.min(batPerc, 100)}%`;
            document.getElementById('batteryBarText').innerText = `${batPerc.toFixed(0)}%`;

            if (finalWhNeeded > usableWh) {
                batBar.className = "h-full bg-red-600 transition-all duration-500";
                document.getElementById('verdictTitle').className = "text-red-400 font-bold";
                document.getElementById('verdictTitle').innerText = "Bater√≠a Insuficiente";
                document.getElementById('verdictSub').innerText = "Reduce horas o sube de Kit";
            } else {
                batBar.className = "h-full bg-green-500 transition-all duration-500";
                document.getElementById('verdictTitle').className = "text-green-400 font-bold";
                document.getElementById('verdictTitle').innerText = "‚úÖ Kit Soportado";
                const surplus = ((usableWh - finalWhNeeded)/1000).toFixed(1);
                document.getElementById('verdictSub').innerText = `Te sobran aprox ${surplus} kWh`;
            }
        }

        // --- MODAL ---
        function openModal(id) {
            const d = kitDetails[id];
            document.getElementById('modalTitle').innerText = d.t;
            document.getElementById('modalBody').innerHTML = d.b;
            document.getElementById('modalOverlay').classList.remove('hidden');
            document.body.classList.add('modal-active');
        }
        function closeModal() {
            document.getElementById('modalOverlay').classList.add('hidden');
            document.body.classList.remove('modal-active');
        }

        init();
    </script>
</body>
</html>